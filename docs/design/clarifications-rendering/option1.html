<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Option 1 — Richer Markdown Styling</title>
<link rel="stylesheet" href="shell.css">
<style>
/* ── Option 1: richer markdown styling in the right preview panel ── */

.editor-raw {
  padding: 14px;
  font-family: ui-monospace, 'JetBrains Mono', monospace;
  font-size: 12px;
  line-height: 1.7;
  color: var(--muted-fg);
  white-space: pre-wrap;
  word-break: break-word;
}
.editor-raw .md-h2     { color: oklch(0.800 0.090 180); font-weight: 700; }
.editor-raw .md-h3     { color: oklch(0.800 0.075 55); font-weight: 600; }
.editor-raw .md-h4     { color: oklch(0.760 0.060 280); font-weight: 600; }
.editor-raw .md-bold   { color: var(--fg); font-weight: 600; }
.editor-raw .md-ans    { color: oklch(0.720 0.090 145); }
.editor-raw .md-bullet { color: oklch(0.650 0.060 260); }

/* ── The upgraded preview pane ── */
.preview-pane {
  padding: 14px 18px;
  overflow-y: auto;
  flex: 1;
}

/* Section group wrapper (## heading) */
.qa-section {
  margin-bottom: 22px;
}
.qa-section-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--primary);
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 10px;
  padding-bottom: 6px;
  border-bottom: 1px solid var(--border);
}
.qa-section-title .section-count {
  font-size: 10px;
  font-weight: 600;
  background: oklch(0.250 0.020 190 / 0.4);
  border: 1px solid oklch(0.450 0.060 190);
  border-radius: 9999px;
  padding: 1px 7px;
  color: var(--primary);
  margin-left: auto;
}

/* Individual question card (numbered question) */
.qa-card {
  background: oklch(0.210 0.005 265);
  border: 1px solid var(--border);
  border-left: 3px solid var(--border);
  border-radius: 6px;
  margin-bottom: 8px;
  overflow: hidden;
  transition: border-left-color 0.15s;
}
.qa-card.answered {
  border-left-color: var(--green);
}
.qa-card.unanswered {
  border-left-color: var(--amber);
}

.qa-card-head {
  padding: 9px 12px;
  display: flex;
  align-items: flex-start;
  gap: 9px;
}
.qa-num {
  font-size: 10px;
  font-weight: 700;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--muted);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--muted-fg);
  flex-shrink: 0;
  margin-top: 1px;
}
.qa-card.answered .qa-num {
  background: oklch(0.250 0.030 145 / 0.4);
  color: var(--green);
}
.qa-question {
  font-size: 12.5px;
  font-weight: 600;
  color: var(--fg);
  line-height: 1.4;
  flex: 1;
}
.qa-rec {
  font-size: 11.5px;
  color: var(--muted-fg);
  line-height: 1.5;
  padding: 0 12px 0 41px;
  margin-bottom: 6px;
  font-style: italic;
}

/* Answer chip */
.qa-answer {
  margin: 0 12px 9px 41px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: oklch(0.250 0.030 145 / 0.25);
  border: 1px solid oklch(0.400 0.080 145);
  border-radius: 5px;
  padding: 4px 10px;
  font-size: 11.5px;
  color: oklch(0.750 0.120 145);
}
.qa-answer-label {
  font-weight: 700;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  opacity: 0.7;
}

/* Unanswered placeholder */
.qa-unanswered {
  margin: 0 12px 9px 41px;
  display: inline-flex;
  align-items: center;
  gap: 5px;
  background: oklch(0.240 0.040 55 / 0.25);
  border: 1px solid oklch(0.450 0.080 55);
  border-radius: 5px;
  padding: 4px 10px;
  font-size: 11px;
  color: var(--amber);
}

/* Refinements sub-block */
.refinements {
  border-top: 1px solid var(--border);
  background: oklch(0.195 0.004 268);
}
.refinement-item {
  padding: 8px 12px 8px 41px;
  border-bottom: 1px solid oklch(0.250 0.005 260);
  display: flex;
  flex-direction: column;
  gap: 5px;
}
.refinement-item:last-child { border-bottom: none; }
.ref-label {
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: var(--muted-fg);
  margin-bottom: 1px;
}
.ref-q {
  font-size: 12px;
  font-weight: 600;
  color: oklch(0.820 0.005 90);
}
.ref-answer {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  background: oklch(0.250 0.020 195 / 0.3);
  border: 1px solid oklch(0.420 0.055 195);
  border-radius: 4px;
  padding: 3px 8px;
  font-size: 11px;
  color: var(--primary);
  align-self: flex-start;
}
.ref-empty {
  font-size: 11px;
  color: var(--amber);
  font-style: italic;
}
</style>
</head>
<body>
<a href="index.html" class="back-link">← All options</a>

<!-- Topbar -->
<div class="topbar">
  <span class="skill-name">sales-pipeline</span>
  <div class="topbar-spacer"></div>
  <div class="topbar-btn active">Review</div>
  <div class="topbar-icon">⚙</div>
</div>

<div class="main">
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-label">Workflow Steps</div>
    <div class="step-item done"><div class="step-icon done">✓</div>1. Research</div>
    <div class="step-item done"><div class="step-icon done">✓</div>2. Review</div>
    <div class="step-item done"><div class="step-icon done">✓</div>3. Detailed Research</div>
    <div class="step-item active"><div class="step-icon active">●</div>4. Review</div>
    <div class="step-item"><div class="step-icon">5</div>Confirm Decisions</div>
    <div class="step-item"><div class="step-icon">6</div>Generate Skill</div>
    <div class="step-item"><div class="step-icon">7</div>Validate Skill</div>
  </div>

  <!-- Content -->
  <div class="content">
    <div class="step-header">
      <div>
        <div class="step-title">Step 4: Review</div>
        <div class="step-desc">Review and answer detailed clarification questions</div>
      </div>
      <div class="header-right">
        <div class="badge-pill teal">
          <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
          Q&amp;A Review
        </div>
      </div>
    </div>

    <div class="panes">
      <!-- Left: raw MDEditor (unchanged) -->
      <div class="pane" style="max-width:48%">
        <div class="pane-header">context/clarifications.md</div>
        <div class="editor-area">
          <div class="editor-raw"><span class="md-h2">## Section 1: Entities &amp; Relationships</span>

<span class="md-bold">1. What is the distinction between Lead and Opportunity?</span>
   - Recommendation: Leads are unqualified; Opportunities are qualified.

   <span class="md-ans">**Answer**: a — Leads are unqualified prospects</span>

<span class="md-bold">2. How are contacts linked to Opportunities?</span>
   - Recommendation: Contacts link via a junction object.

   <span class="md-ans">**Answer**: b — Via junction object</span>

<span class="md-bold">3. Cardinality between Opportunities and Quotations?</span>
   - Recommendation: One Opportunity can have many Quotes.

   <span class="md-ans">**Answer**: (accepted recommendation)</span>

<span class="md-h4">#### Refinements</span>

<span class="md-h4">R1.1</span> Should Lead conversion auto-create an Opportunity?
<span class="md-bold">**Choices**:</span>
<span class="md-bullet">  a) Always auto-create</span>
<span class="md-bullet">  b) Prompt user</span>
<span class="md-bullet">  c) Never auto-create</span>
<span class="md-bold">**Recommendation**:</span> b — Give user control

<span class="md-bold">**Answer**:</span>

<span class="md-h2">## Section 2: Business Rules</span>

<span class="md-bold">4. What defines pipeline stage progression?</span>
   - Recommendation: Use criteria-based advancement.

   <span class="md-ans">**Answer**: a — Criteria-based</span>

<span class="md-bold">5. How is win probability calculated?</span>
   - Recommendation: Manual override with stage defaults.

   <span class="md-ans">**Answer**:</span>

<span class="md-h4">#### Refinements</span>

<span class="md-h4">R2.1</span> Should probability sync with stage changes?
<span class="md-bold">**Choices**:</span>
<span class="md-bullet">  a) Auto-sync on stage change</span>
<span class="md-bullet">  b) Manual only</span>
<span class="md-bold">**Recommendation**:</span> a

<span class="md-bold">**Answer**:</span>

<span class="md-h2">## Section 3: Metrics &amp; Calculations</span>

<span class="md-bold">6. Revenue recognition timing?</span>
   - Recommendation: On close date.

   <span class="md-ans">**Answer**: (accepted recommendation)</span>

<span class="md-bold">7. Pipeline velocity formula?</span>
   - Recommendation: Standard (deals × win% × value) / days.

   <span class="md-ans">**Answer**:</span>

<span class="md-bold">8. Custom field tracking for reporting?</span>
   - Recommendation: Limit to 5 indexed fields.

   <span class="md-ans">**Answer**: a — Up to 5 indexed</span></div>
        </div>
      </div>

      <!-- Right: UPGRADED preview with card styling -->
      <div class="pane">
        <div class="pane-header" style="display:flex;align-items:center;justify-content:space-between">
          <span>Preview</span>
          <span style="color:oklch(0.640 0.130 145);font-size:10px;font-weight:600">6 / 8 answered</span>
        </div>
        <div class="preview-pane">

          <!-- Section 1 -->
          <div class="qa-section">
            <div class="qa-section-title">
              Section 1: Entities &amp; Relationships
              <span class="section-count">3 Q + 1 R</span>
            </div>

            <div class="qa-card answered">
              <div class="qa-card-head">
                <div class="qa-num">1</div>
                <div class="qa-question">What is the distinction between a Lead and an Opportunity?</div>
              </div>
              <div class="qa-rec">Recommendation: Leads are unqualified; Opportunities are qualified and tracked in pipeline.</div>
              <div class="qa-answer"><span class="qa-answer-label">Answer</span> a — Leads are unqualified prospects</div>
            </div>

            <div class="qa-card answered">
              <div class="qa-card-head">
                <div class="qa-num">2</div>
                <div class="qa-question">How are contacts linked to Opportunities?</div>
              </div>
              <div class="qa-rec">Recommendation: Contacts link to Opportunities via a junction object (Contact Role).</div>
              <div class="qa-answer"><span class="qa-answer-label">Answer</span> b — Via junction object (Contact Role)</div>
            </div>

            <div class="qa-card answered">
              <div class="qa-card-head">
                <div class="qa-num">3</div>
                <div class="qa-question">What is the cardinality between Opportunities and Quotations?</div>
              </div>
              <div class="qa-rec">Recommendation: One Opportunity can have many Quotes; one is marked primary.</div>
              <div class="qa-answer"><span class="qa-answer-label">Answer</span> Accepted recommendation</div>
              <div class="refinements">
                <div class="refinement-item">
                  <div class="ref-label">Refinement R1.1</div>
                  <div class="ref-q">Should Lead conversion automatically create an Opportunity?</div>
                  <div class="ref-empty">⚠ Not yet answered</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Section 2 -->
          <div class="qa-section">
            <div class="qa-section-title">
              Section 2: Business Rules
              <span class="section-count">2 Q + 1 R</span>
            </div>

            <div class="qa-card answered">
              <div class="qa-card-head">
                <div class="qa-num">4</div>
                <div class="qa-question">What defines pipeline stage progression rules?</div>
              </div>
              <div class="qa-rec">Recommendation: Use criteria-based advancement with explicit entry/exit criteria per stage.</div>
              <div class="qa-answer"><span class="qa-answer-label">Answer</span> a — Criteria-based advancement</div>
            </div>

            <div class="qa-card unanswered">
              <div class="qa-card-head">
                <div class="qa-num">5</div>
                <div class="qa-question">How is win probability calculated and maintained?</div>
              </div>
              <div class="qa-rec">Recommendation: Manual override allowed, but defaults are set per stage.</div>
              <div class="qa-unanswered">⚠ Not yet answered</div>
              <div class="refinements">
                <div class="refinement-item">
                  <div class="ref-label">Refinement R2.1</div>
                  <div class="ref-q">Should probability auto-sync when a stage changes?</div>
                  <div class="ref-empty">⚠ Not yet answered</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Section 3 -->
          <div class="qa-section">
            <div class="qa-section-title">
              Section 3: Metrics &amp; Calculations
              <span class="section-count">3 Q</span>
            </div>

            <div class="qa-card answered">
              <div class="qa-card-head">
                <div class="qa-num">6</div>
                <div class="qa-question">When does revenue recognition occur?</div>
              </div>
              <div class="qa-rec">Recommendation: On close date, not invoice date.</div>
              <div class="qa-answer"><span class="qa-answer-label">Answer</span> Accepted recommendation</div>
            </div>

            <div class="qa-card unanswered">
              <div class="qa-card-head">
                <div class="qa-num">7</div>
                <div class="qa-question">Which pipeline velocity formula should be used?</div>
              </div>
              <div class="qa-rec">Recommendation: Standard formula — (deals × win% × avg value) / avg days in cycle.</div>
              <div class="qa-unanswered">⚠ Not yet answered</div>
            </div>

            <div class="qa-card answered">
              <div class="qa-card-head">
                <div class="qa-num">8</div>
                <div class="qa-question">How many custom fields should be tracked for reporting?</div>
              </div>
              <div class="qa-rec">Recommendation: Limit to 5 indexed fields to avoid query performance issues.</div>
              <div class="qa-answer"><span class="qa-answer-label">Answer</span> a — Up to 5 indexed custom fields</div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- Bottom bar -->
    <div class="bottom-bar">
      <div class="bottom-hint">Edit the markdown above, then save and continue.</div>
      <div class="btn-row">
        <button class="btn btn-outline">↺ Reload</button>
        <button class="btn btn-outline">Save</button>
        <button class="btn btn-primary">Save &amp; Continue →</button>
      </div>
    </div>
  </div>
</div>

<!-- Note callout -->
<div style="position:fixed;bottom:60px;right:14px;background:oklch(0.200 0.015 260);border:1px solid oklch(0.350 0.040 260);border-radius:8px;padding:10px 14px;max-width:230px;font-size:11.5px;line-height:1.6;color:var(--muted-fg);z-index:50">
  <strong style="color:var(--fg);display:block;margin-bottom:4px">Option 1 changes</strong>
  Right preview now uses per-question cards with colored left-border (green = answered, amber = needs answer), answer chips, and refinements sub-rows.
  <br><br>
  <strong style="color:var(--primary)">Left editor unchanged.</strong> CSS-only for the preview.
</div>
</body>
</html>
