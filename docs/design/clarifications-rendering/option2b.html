<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Option 2b — Single-Pane Structured Editor</title>
<link rel="stylesheet" href="shell.css">
<style>
/* ══ Toolbar ════════════════════════════════════════════════ */
.doc-toolbar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 20px;
  border-bottom: 1px solid var(--border);
  background: oklch(0.185 0.004 270);
  flex-shrink: 0;
}
.doc-toolbar-left { display: flex; align-items: center; gap: 8px; flex: 1; }
.doc-toolbar-right { display: flex; align-items: center; gap: 8px; }

.prog-bar-wrap { width: 120px; height: 4px; background: var(--muted); border-radius: 2px; overflow: hidden; }
.prog-bar-fill { height: 100%; background: var(--green); border-radius: 2px; }
.prog-label { font-size: 11px; color: oklch(0.640 0.130 145); font-weight: 600; white-space: nowrap; }
.prog-label.partial { color: var(--amber); }

.raw-toggle {
  display: flex; align-items: center; gap: 5px;
  padding: 4px 10px; background: var(--muted); border: 1px solid var(--border);
  border-radius: 5px; font-size: 11px; color: var(--muted-fg); cursor: pointer;
}
.raw-toggle:hover { color: var(--fg); background: oklch(0.250 0.006 260); }
.raw-toggle svg { flex-shrink: 0; }

/* ══ Document scroll area ═══════════════════════════════════ */
.doc-scroll {
  flex: 1;
  overflow-y: auto;
  padding: 0 0 40px;
}

/* ── Frontmatter ── */
.fm-block {
  margin: 12px 24px;
  background: oklch(0.200 0.008 260);
  border: 1px solid oklch(0.300 0.012 260);
  border-radius: 6px;
  padding: 8px 12px;
  font-size: 11px;
  font-family: ui-monospace, monospace;
  color: oklch(0.500 0.012 260);
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
}
.fm-block .fm-k { color: oklch(0.620 0.050 270); }
.fm-block .fm-v { color: oklch(0.580 0.080 145); }
.fm-block .fm-p { color: oklch(0.700 0.090 55); }

/* ── Document heading ── */
.doc-h1 {
  padding: 14px 24px 4px;
  font-size: 16px;
  font-weight: 700;
  color: var(--fg);
}
.doc-callout {
  margin: 6px 24px 0;
  padding: 7px 12px;
  background: oklch(0.230 0.035 55 / 0.3);
  border: 1px solid oklch(0.430 0.080 55);
  border-radius: 5px;
  font-size: 12px;
  color: oklch(0.820 0.080 55);
}

/* ── Section band ── */
.sec-band {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 20px 0 0;
  padding: 10px 24px 8px;
  background: oklch(0.210 0.012 210 / 0.5);
  border-top: 2px solid var(--primary);
  position: sticky;
  top: 0;
  z-index: 10;
  backdrop-filter: blur(4px);
}
.sec-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--primary);
  flex: 1;
}
.sec-desc {
  padding: 4px 24px 10px;
  font-size: 12px;
  color: var(--muted-fg);
  font-style: italic;
  background: oklch(0.205 0.008 215 / 0.3);
  border-bottom: 1px solid oklch(0.255 0.008 235);
}
.sec-chip {
  font-size: 10px;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: 9999px;
  flex-shrink: 0;
}
.sec-chip.complete { background: oklch(0.250 0.030 145 / 0.3); border: 1px solid oklch(0.400 0.080 145); color: oklch(0.640 0.130 145); }
.sec-chip.partial  { background: oklch(0.240 0.040 55 / 0.25); border: 1px solid oklch(0.450 0.080 55); color: var(--amber); }
.sec-chip.blocked  { background: oklch(0.240 0.050 25 / 0.3); border: 1px solid oklch(0.480 0.130 25); color: oklch(0.700 0.140 25); }

/* ── Question card ── */
.q-card {
  margin: 10px 24px 0;
  border: 1px solid var(--border);
  border-radius: 7px;
  overflow: hidden;
}
.q-card.answered { border-left: 3px solid var(--green); }
.q-card.unanswered { border-left: 3px solid var(--amber); }

.q-card-head {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 9px 14px;
  background: oklch(0.210 0.005 265);
  cursor: pointer;
  user-select: none;
}
.q-card-head:hover { background: oklch(0.220 0.006 265); }
.q-num {
  font-size: 10px;
  font-weight: 700;
  font-family: ui-monospace, monospace;
  color: var(--muted-fg);
  flex-shrink: 0;
  margin-top: 2px;
}
.q-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--fg);
  flex: 1;
  line-height: 1.35;
}
.must-pill {
  font-size: 9px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  background: oklch(0.250 0.060 25 / 0.5);
  border: 1px solid oklch(0.500 0.150 25);
  color: oklch(0.700 0.160 25);
  border-radius: 3px;
  padding: 2px 5px;
  flex-shrink: 0;
  font-family: ui-monospace, monospace;
}
.q-chevron {
  font-size: 9px;
  color: var(--muted-fg);
  flex-shrink: 0;
  margin-top: 3px;
  transition: transform 0.2s;
}
.q-card.expanded .q-chevron { transform: rotate(90deg); }

/* Collapsed summary (shown when not expanded) */
.q-collapsed-ans {
  padding: 0 14px 8px 14px;
  background: oklch(0.210 0.005 265);
  display: flex;
  align-items: center;
  gap: 8px;
}
.q-card.expanded .q-collapsed-ans { display: none; }
.q-ans-preview {
  font-size: 11.5px;
  color: oklch(0.720 0.090 145);
  font-style: italic;
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.q-ans-empty {
  font-size: 11.5px;
  color: oklch(0.560 0.070 55);
  font-style: italic;
}

/* Question body (expanded) */
.q-body {
  display: none;
  background: oklch(0.197 0.005 268);
  padding: 10px 14px;
  border-top: 1px solid oklch(0.255 0.006 265);
}
.q-card.expanded .q-body { display: block; }

.q-text {
  font-size: 12.5px;
  color: oklch(0.820 0.004 90);
  margin-bottom: 10px;
  line-height: 1.55;
}
.q-consolidated {
  font-size: 10.5px;
  color: oklch(0.450 0.012 260);
  font-style: italic;
  margin-bottom: 8px;
}

/* Options list */
.opt-list { display: flex; flex-direction: column; gap: 3px; margin-bottom: 10px; }
.opt-item {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 5px 9px;
  border-radius: 5px;
  font-size: 12px;
  color: var(--muted-fg);
  border: 1px solid transparent;
  cursor: pointer;
  line-height: 1.45;
  transition: all 0.1s;
}
.opt-item:hover { background: oklch(0.220 0.007 265); color: oklch(0.820 0.004 90); }
.opt-item.selected {
  background: oklch(0.230 0.030 155 / 0.4);
  border-color: oklch(0.460 0.090 150);
  color: oklch(0.840 0.070 150);
}
.opt-key {
  font-size: 10px;
  font-weight: 700;
  width: 14px;
  flex-shrink: 0;
  color: oklch(0.540 0.030 260);
  font-family: ui-monospace, monospace;
  padding-top: 2px;
}
.opt-item.selected .opt-key { color: oklch(0.680 0.090 150); }

/* Inline answer field */
.answer-field-wrap {
  margin-top: 4px;
  border: 1px solid oklch(0.310 0.010 260);
  border-radius: 5px;
  overflow: hidden;
  transition: border-color 0.15s;
}
.answer-field-wrap:focus-within {
  border-color: var(--primary);
  box-shadow: 0 0 0 2px oklch(0.740 0.115 180 / 0.15);
}
.answer-field-label {
  padding: 4px 10px 3px;
  background: oklch(0.200 0.008 260);
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: oklch(0.580 0.050 190);
  font-family: ui-monospace, monospace;
  border-bottom: 1px solid oklch(0.265 0.008 260);
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.answer-field-hint { font-weight: 400; color: oklch(0.440 0.008 260); text-transform: none; letter-spacing: 0; font-size: 10px; }
.answer-field {
  width: 100%;
  padding: 8px 10px;
  background: oklch(0.195 0.004 268);
  border: none;
  outline: none;
  resize: none;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  font-size: 12.5px;
  color: oklch(0.820 0.070 145);
  line-height: 1.55;
  min-height: 36px;
}
.answer-field::placeholder { color: oklch(0.420 0.008 260); font-style: italic; }
.answer-field:empty::before { content: attr(data-placeholder); color: oklch(0.420 0.008 260); font-style: italic; }

/* ── Refinements ── */
.refinements {
  margin: 10px 0 0 14px;
  border: 1px solid oklch(0.265 0.012 265);
  border-left: 2px solid oklch(0.500 0.060 275);
  border-radius: 0 5px 5px 0;
  overflow: hidden;
}
.ref-header-row {
  padding: 5px 10px;
  background: oklch(0.200 0.010 270 / 0.7);
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: oklch(0.580 0.050 275);
  border-bottom: 1px solid oklch(0.255 0.010 270);
  font-family: ui-monospace, monospace;
}
.ref-item-block {
  padding: 8px 10px;
  border-bottom: 1px solid oklch(0.240 0.007 265);
}
.ref-item-block:last-child { border-bottom: none; }
.ref-item-block.answered { border-left: 2px solid oklch(0.450 0.090 145); margin-left: -2px; }
.ref-item-block.unanswered { border-left: 2px solid oklch(0.490 0.055 275); margin-left: -2px; }
.ref-num { font-size: 10px; font-weight: 700; color: oklch(0.560 0.050 275); font-family: ui-monospace, monospace; margin-bottom: 2px; }
.ref-title { font-size: 12px; font-weight: 600; color: oklch(0.780 0.035 280); margin-bottom: 6px; line-height: 1.35; }
.ref-ans-field-wrap {
  border: 1px solid oklch(0.295 0.010 260);
  border-radius: 4px;
  overflow: hidden;
  transition: border-color 0.15s;
}
.ref-ans-field-wrap:focus-within { border-color: oklch(0.600 0.060 280); }
.ref-ans-field {
  width: 100%;
  padding: 6px 10px;
  background: oklch(0.190 0.004 268);
  border: none;
  outline: none;
  resize: none;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  font-size: 12px;
  color: oklch(0.780 0.060 145);
  line-height: 1.5;
  min-height: 28px;
}
.ref-ans-field::placeholder { color: oklch(0.400 0.008 260); font-style: italic; }

/* ── Needs Clarification ── */
.needs-clar-band {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 20px 0 0;
  padding: 10px 24px 8px;
  background: oklch(0.210 0.020 55 / 0.25);
  border-top: 2px solid var(--amber);
}
.needs-clar-title { font-size: 13px; font-weight: 700; color: var(--amber); flex: 1; }
.clar-card {
  margin: 10px 24px 0;
  padding: 10px 14px;
  background: oklch(0.205 0.015 55 / 0.2);
  border: 1px solid oklch(0.360 0.060 55 / 0.5);
  border-radius: 6px;
}
.clar-card.blocked {
  background: oklch(0.210 0.030 25 / 0.2);
  border-color: oklch(0.420 0.100 25 / 0.5);
}
.clar-card-title { font-size: 12.5px; font-weight: 600; color: oklch(0.800 0.070 55); margin-bottom: 4px; }
.clar-card.blocked .clar-card-title { color: oklch(0.750 0.130 25); }
.clar-card-body { font-size: 12px; color: var(--muted-fg); line-height: 1.55; }
.clar-card-body em { color: oklch(0.640 0.090 145); font-style: normal; font-weight: 600; }
</style>
</head>
<body>
<a href="index.html" class="back-link">← All options</a>

<div class="topbar">
  <span class="skill-name">sales-pipeline</span>
  <div class="topbar-spacer"></div>
  <div class="topbar-btn active">Review</div>
  <div class="topbar-icon">⚙</div>
</div>

<div class="main">
  <div class="sidebar">
    <div class="sidebar-label">Workflow Steps</div>
    <div class="step-item done"><div class="step-icon done">✓</div>1. Research</div>
    <div class="step-item done"><div class="step-icon done">✓</div>2. Review</div>
    <div class="step-item done"><div class="step-icon done">✓</div>3. Detailed Research</div>
    <div class="step-item active"><div class="step-icon active">●</div>4. Review</div>
    <div class="step-item"><div class="step-icon">5</div>Confirm Decisions</div>
    <div class="step-item"><div class="step-icon">6</div>Generate Skill</div>
    <div class="step-item"><div class="step-icon">7</div>Validate Skill</div>
  </div>

  <div class="content">
    <div class="step-header">
      <div>
        <div class="step-title">Step 4: Review</div>
        <div class="step-desc">Read each question and type your answer directly</div>
      </div>
      <div class="header-right">
        <div class="badge-pill teal">
          <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/></svg>
          Q&amp;A Review
        </div>
      </div>
    </div>

    <!-- Toolbar -->
    <div class="doc-toolbar">
      <div class="doc-toolbar-left">
        <div class="prog-bar-wrap"><div class="prog-bar-fill" style="width:54%"></div></div>
        <span class="prog-label partial">14 / 26 answered</span>
        <span style="font-size:11px;color:oklch(0.450 0.010 260)">·</span>
        <span style="font-size:11px;color:oklch(0.620 0.160 25)">12 unanswered (incl. 5 MUST ANSWER)</span>
      </div>
      <div class="doc-toolbar-right">
        <div class="raw-toggle">
          <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
          Edit raw markdown
        </div>
      </div>
    </div>

    <!-- Single scrollable document -->
    <div class="doc-scroll">

      <!-- Frontmatter -->
      <div class="fm-block">
        <span><span class="fm-k">status</span>: <span class="fm-v">pending</span></span>
        <span><span class="fm-k">question_count</span>: <span class="fm-v">26</span></span>
        <span><span class="fm-k">sections</span>: <span class="fm-v">6</span></span>
        <span><span class="fm-k">refinement_count</span>: <span class="fm-v">16</span></span>
        <span><span class="fm-k">priority_questions</span>: <span class="fm-p">[Q1, Q2, Q3, Q4, Q5]</span></span>
      </div>

      <div class="doc-h1">Clarifications: Sales Pipeline for Just Analytics</div>
      <div class="doc-callout">Questions marked <strong>[MUST ANSWER]</strong> block skill generation. All others refine quality but have reasonable defaults.</div>

      <!-- ══ SECTION 1 ══════════════════════════════════════════ -->
      <div class="sec-band">
        <span class="sec-title">§1 · Core Concepts and Definitions</span>
        <span class="sec-chip complete">5 / 5 answered</span>
      </div>
      <div class="sec-desc">These questions resolve foundational terms used throughout all pipeline metrics and reporting.</div>

      <!-- Q1 -->
      <div class="q-card answered expanded" id="qc1">
        <div class="q-card-head" onclick="toggleCard('qc1')">
          <span class="q-num">Q1</span>
          <span class="q-title">MRR Definition by Service Type</span>
          <span class="must-pill">MUST</span>
          <span class="q-chevron">▶</span>
        </div>
        <div class="q-collapsed-ans"><span class="q-ans-preview">Managed services is already MRR; PS &lt;12mo = TCV/10; PS &gt;12mo = year 1 value/12.</span></div>
        <div class="q-body">
          <div class="q-text">How is MRR calculated across your three service categories (Managed Services, PS &lt;12mo, PS &gt;12mo)?</div>
          <div class="opt-list">
            <div class="opt-item"><span class="opt-key">A.</span>Managed Services MRR = recurring monthly fee. PS &lt;12mo = TCV spread over engagement months. PS &gt;12mo = TCV / actual term months.</div>
            <div class="opt-item"><span class="opt-key">B.</span>Managed Services MRR = monthly fee. PS &lt;12mo treated as one-time (excluded from MRR). PS &gt;12mo = annualized TCV/12.</div>
            <div class="opt-item"><span class="opt-key">C.</span>MRR applies only to Managed Services. All PS deals tracked as TCV or ACV, excluded from MRR entirely.</div>
            <div class="opt-item"><span class="opt-key">D.</span>Other (please specify)</div>
          </div>
          <div class="q-consolidated">_Consolidated from: Metrics Q1, Segmentation Q2, Business Rules Q5, Modeling Q7_</div>
          <div class="answer-field-wrap">
            <div class="answer-field-label">Answer <span class="answer-field-hint">— type freely or reference a choice above (e.g. "A" or "B — with modification")</span></div>
            <textarea class="answer-field" rows="2">Managed services is already MRR, PS projects &lt;12mo are total value / 10. PS projects &gt;12mo are year 1 value / 12.</textarea>
          </div>
          <div class="refinements">
            <div class="ref-header-row">Refinements</div>
            <div class="ref-item-block answered">
              <div class="ref-num">R1.1</div>
              <div class="ref-title">Why TCV/10 for PS Projects Under 12 Months — The divisor will be baked into the MRR formula. If it reflects a fixed assumption, it must be documented explicitly.</div>
              <div class="ref-ans-field-wrap">
                <textarea class="ref-ans-field" rows="1">A — 10 is a fixed company-wide assumption for average PS engagement length.</textarea>
              </div>
            </div>
            <div class="ref-item-block answered">
              <div class="ref-num">R1.2</div>
              <div class="ref-title">Definition of "Year 1 Value" for PS Projects Over 12 Months</div>
              <div class="ref-ans-field-wrap">
                <textarea class="ref-ans-field" rows="1">B — ACV as entered on the Odoo Opportunity record.</textarea>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Q2 -->
      <div class="q-card answered" id="qc2">
        <div class="q-card-head" onclick="toggleCard('qc2')">
          <span class="q-num">Q2</span>
          <span class="q-title">Committed Pipeline Signal — Stage vs. Forecast Flag</span>
          <span class="must-pill">MUST</span>
          <span class="q-chevron">▶</span>
        </div>
        <div class="q-collapsed-ans"><span class="q-ans-preview">B — Stage governs pipeline metrics. Forecast flag governs revenue forecasting.</span></div>
        <div class="q-body">
          <div class="q-text">Your key challenge is that "committed pipeline" is sometimes defined by pipeline stage and sometimes by forecast flag. Which rule governs?</div>
          <div class="opt-list">
            <div class="opt-item"><span class="opt-key">A.</span>Forecast flag is the single source of truth. Stage used only for funnel/progression reporting.</div>
            <div class="opt-item selected"><span class="opt-key">B.</span>Stage governs pipeline metrics (coverage, weighted pipeline). Forecast flag governs revenue forecasting. Both tracked separately and can diverge.</div>
            <div class="opt-item"><span class="opt-key">C.</span>Dual signal — committed only when stage threshold AND forecast flag both set.</div>
            <div class="opt-item"><span class="opt-key">D.</span>Rule differs by service type.</div>
            <div class="opt-item"><span class="opt-key">E.</span>Other (please specify)</div>
          </div>
          <div class="q-consolidated">_Consolidated from: Metrics Q3, Business Rules Q1, Entities Q4, Segmentation Q3, Modeling Q2_</div>
          <div class="answer-field-wrap">
            <div class="answer-field-label">Answer</div>
            <textarea class="answer-field" rows="2">B — Stage governs pipeline metrics (coverage, weighted pipeline). Forecast flag governs revenue forecasting and commit calls. Both are tracked separately and can diverge.</textarea>
          </div>
          <div class="refinements">
            <div class="ref-header-row">Refinements</div>
            <div class="ref-item-block answered">
              <div class="ref-num">R2.1</div>
              <div class="ref-title">Pipeline Entry Point — Which Stage Marks a Deal as "In Pipeline"</div>
              <div class="ref-ans-field-wrap"><textarea class="ref-ans-field" rows="1">B — Any stage beyond the initial "New" or "Prospecting" stage.</textarea></div>
            </div>
            <div class="ref-item-block answered">
              <div class="ref-num">R2.2</div>
              <div class="ref-title">Tie-Breaking Rule When Stage and Forecast Flag Diverge</div>
              <div class="ref-ans-field-wrap"><textarea class="ref-ans-field" rows="1">B — Manager judgment call; divergence must be flagged in weekly pipeline review.</textarea></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Q3 collapsed -->
      <div class="q-card answered" id="qc3">
        <div class="q-card-head" onclick="toggleCard('qc3')">
          <span class="q-num">Q3</span>
          <span class="q-title">Stage-to-Forecast-Flag Relationship in Odoo</span>
          <span class="must-pill">MUST</span>
          <span class="q-chevron">▶</span>
        </div>
        <div class="q-collapsed-ans"><span class="q-ans-preview">A — Independent fields; reps set both manually with no system coupling.</span></div>
        <div class="q-body">
          <div class="q-text">How are pipeline stage and forecast flag related in your Odoo configuration?</div>
          <div class="opt-list">
            <div class="opt-item selected"><span class="opt-key">A.</span>Independent fields — reps set both manually with no system coupling.</div>
            <div class="opt-item"><span class="opt-key">B.</span>Stage-driven — advancing to certain stages automatically sets the forecast flag.</div>
            <div class="opt-item"><span class="opt-key">C.</span>Partially coupled — some stages auto-set the flag; reps can override.</div>
          </div>
          <div class="answer-field-wrap">
            <div class="answer-field-label">Answer</div>
            <textarea class="answer-field" rows="1">A — Independent fields; reps set both manually with no system coupling.</textarea>
          </div>
          <div class="refinements">
            <div class="ref-header-row">Refinements</div>
            <div class="ref-item-block answered">
              <div class="ref-num">R3.1</div>
              <div class="ref-title">Process-Level Governance Rules for Stage and Forecast Flag Combinations</div>
              <div class="ref-ans-field-wrap"><textarea class="ref-ans-field" rows="1">B — No required combinations; reps set both independently.</textarea></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Q4 with deferred refinement -->
      <div class="q-card answered" id="qc4">
        <div class="q-card-head" onclick="toggleCard('qc4')">
          <span class="q-num">Q4</span>
          <span class="q-title">Service Type Representation in Odoo</span>
          <span class="must-pill">MUST</span>
          <span class="q-chevron">▶</span>
        </div>
        <div class="q-collapsed-ans"><span class="q-ans-preview">A — Custom field on Opportunity; &lt;12mo vs. &gt;12mo split from contract duration.</span></div>
        <div class="q-body">
          <div class="q-text">Where does the distinction between Managed Services and Professional Services live in Odoo?</div>
          <div class="opt-list">
            <div class="opt-item selected"><span class="opt-key">A.</span>A custom field on the Opportunity record (e.g., service_type), with the &lt;12mo vs. &gt;12mo split derived from a contract duration field.</div>
            <div class="opt-item"><span class="opt-key">B.</span>Product category on the quotation/sale order lines.</div>
            <div class="opt-item"><span class="opt-key">C.</span>Separate CRM pipelines or sales teams in Odoo for each service type.</div>
          </div>
          <div class="answer-field-wrap">
            <div class="answer-field-label">Answer</div>
            <textarea class="answer-field" rows="1">A — Custom field on the Opportunity record; &lt;12mo vs. &gt;12mo split from contract duration field.</textarea>
          </div>
          <div class="refinements">
            <div class="ref-header-row">Refinements</div>
            <div class="ref-item-block unanswered">
              <div class="ref-num">R4.1 — deferred</div>
              <div class="ref-title">Actual Field Names for Service Type and Contract Duration in Odoo</div>
              <div class="ref-ans-field-wrap">
                <textarea class="ref-ans-field" rows="1" placeholder="Deferred to source system expert — enter field names when confirmed...">this is not me, source system expert will tell.</textarea>
              </div>
            </div>
            <div class="ref-item-block answered">
              <div class="ref-num">R4.2</div>
              <div class="ref-title">How Contract Duration Is Stored</div>
              <div class="ref-ans-field-wrap"><textarea class="ref-ans-field" rows="1">B — Start and end date fields; duration is derived by calculating the difference.</textarea></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Q5 collapsed -->
      <div class="q-card answered" id="qc5">
        <div class="q-card-head" onclick="toggleCard('qc5')">
          <span class="q-num">Q5</span>
          <span class="q-title">MRR Attachment Point in the Data Model</span>
          <span class="must-pill">MUST</span>
          <span class="q-chevron">▶</span>
        </div>
        <div class="q-collapsed-ans"><span class="q-ans-preview">D — Not stored in Odoo; tracked in a separate system.</span></div>
        <div class="q-body">
          <div class="q-text">Where is contract duration or term length stored, which drives MRR calculation?</div>
          <div class="answer-field-wrap">
            <div class="answer-field-label">Answer</div>
            <textarea class="answer-field" rows="1">D — Not stored in Odoo; duration is tracked in a separate system or spreadsheet.</textarea>
          </div>
          <div class="refinements">
            <div class="ref-header-row">Refinements</div>
            <div class="ref-item-block answered">
              <div class="ref-num">R5.1</div>
              <div class="ref-title">Join Key Between Odoo Opportunities and the External Duration Data</div>
              <div class="ref-ans-field-wrap"><textarea class="ref-ans-field" rows="1">A — Odoo Opportunity ID is the primary join key in the external system.</textarea></div>
            </div>
            <div class="ref-item-block answered">
              <div class="ref-num">R5.2</div>
              <div class="ref-title">When External Duration Data Is Expected to Be Populated</div>
              <div class="ref-ans-field-wrap"><textarea class="ref-ans-field" rows="1">A — At stage "Proposal Sent" or equivalent.</textarea></div>
            </div>
          </div>
        </div>
      </div>

      <!-- ══ SECTION 2 ══════════════════════════════════════════ -->
      <div class="sec-band">
        <span class="sec-title">§2 · Pipeline Entities and Data Model</span>
        <span class="sec-chip complete">5 / 5 answered</span>
      </div>
      <div class="sec-desc">These questions establish what records drive pipeline reporting and how they relate.</div>

      <div class="q-card answered" id="qc6">
        <div class="q-card-head" onclick="toggleCard('qc6')"><span class="q-num">Q6</span><span class="q-title">Primary Pipeline Entity (Analytical Grain)</span><span class="q-chevron">▶</span></div>
        <div class="q-collapsed-ans"><span class="q-ans-preview">B — The Quotation / Sale Order line; one row per product or service line item.</span></div>
        <div class="q-body">
          <div class="q-text">Which Odoo record type is the authoritative grain of your pipeline report?</div>
          <div class="answer-field-wrap"><div class="answer-field-label">Answer</div><textarea class="answer-field" rows="1">B — The Quotation / Sale Order line; one row per product or service line item.</textarea></div>
          <div class="refinements">
            <div class="ref-header-row">Refinements</div>
            <div class="ref-item-block answered"><div class="ref-num">R6.1</div><div class="ref-title">Multi-Line Deal Aggregation for Opportunity-Level Metrics</div><div class="ref-ans-field-wrap"><textarea class="ref-ans-field" rows="1">A — One deal = one crm.lead. Line-level grain used only for revenue metrics.</textarea></div></div>
            <div class="ref-item-block answered"><div class="ref-num">R6.2</div><div class="ref-title">Mixed-Service-Type Deals on a Single Quotation</div><div class="ref-ans-field-wrap"><textarea class="ref-ans-field" rows="1">A — Each line inherits its MRR formula from its own service type independently.</textarea></div></div>
          </div>
        </div>
      </div>

      <div class="q-card answered" id="qc7"><div class="q-card-head" onclick="toggleCard('qc7')"><span class="q-num">Q7</span><span class="q-title">Cardinality Between Opportunities and Quotations</span><span class="q-chevron">▶</span></div><div class="q-collapsed-ans"><span class="q-ans-preview">B — Yes, but only one is ever "active" at a time; others are superseded.</span></div><div class="q-body"><div class="answer-field-wrap"><div class="answer-field-label">Answer</div><textarea class="answer-field" rows="1">B — Yes, but only one is ever "active" at a time; others are superseded.</textarea></div></div></div>
      <div class="q-card answered" id="qc8"><div class="q-card-head" onclick="toggleCard('qc8')"><span class="q-num">Q8</span><span class="q-title">Account-to-Opportunity Relationship</span><span class="q-chevron">▶</span></div><div class="q-collapsed-ans"><span class="q-ans-preview">C — Links to both a company and a contact as separate fields.</span></div><div class="q-body"><div class="answer-field-wrap"><div class="answer-field-label">Answer</div><textarea class="answer-field" rows="1">C — Opportunity links to both a company and a contact as separate fields.</textarea></div></div></div>
      <div class="q-card answered" id="qc9"><div class="q-card-head" onclick="toggleCard('qc9')"><span class="q-num">Q9</span><span class="q-title">Lead-to-Opportunity Conversion</span><span class="q-chevron">▶</span></div><div class="q-collapsed-ans"><span class="q-ans-preview">B — Distinct; pipeline reporting starts only at opportunity stage.</span></div><div class="q-body"><div class="answer-field-wrap"><div class="answer-field-label">Answer</div><textarea class="answer-field" rows="1">B — Distinct; pipeline reporting starts only at opportunity stage.</textarea></div></div></div>
      <div class="q-card answered" id="qc10"><div class="q-card-head" onclick="toggleCard('qc10')"><span class="q-num">Q10</span><span class="q-title">Custom Fields or Modules in Odoo</span><span class="q-chevron">▶</span></div><div class="q-collapsed-ans"><span class="q-ans-preview">A — Custom fields on crm.lead.</span></div><div class="q-body"><div class="answer-field-wrap"><div class="answer-field-label">Answer</div><textarea class="answer-field" rows="1">A — Custom fields on crm.lead.</textarea></div></div></div>

      <!-- ══ SECTION 3 (abbreviated) ═══════════════════════════ -->
      <div class="sec-band">
        <span class="sec-title">§3 · Business Rules and Exceptions</span>
        <span class="sec-chip partial">4 / 5 (1 deferred)</span>
      </div>
      <div class="sec-desc">These questions capture the operational rules that govern deal progression and pipeline hygiene.</div>

      <div class="q-card answered" id="qc11"><div class="q-card-head" onclick="toggleCard('qc11')"><span class="q-num">Q11</span><span class="q-title">Stage Progression Rules</span><span class="q-chevron">▶</span></div><div class="q-collapsed-ans"><span class="q-ans-preview">C — Both directions fully open; reps can move to any stage at any time.</span></div><div class="q-body"><div class="answer-field-wrap"><div class="answer-field-label">Answer</div><textarea class="answer-field" rows="1">C — Both directions fully open.</textarea></div></div></div>
      <div class="q-card answered" id="qc12"><div class="q-card-head" onclick="toggleCard('qc12')"><span class="q-num">Q12</span><span class="q-title">Committed Pipeline Variation by Service Type</span><span class="q-chevron">▶</span></div><div class="q-collapsed-ans"><span class="q-ans-preview">A — Same definition for all service types.</span></div><div class="q-body"><div class="answer-field-wrap"><div class="answer-field-label">Answer</div><textarea class="answer-field" rows="1">A</textarea></div><div class="refinements"><div class="ref-header-row">Refinements</div><div class="ref-item-block answered"><div class="ref-num">R12.1a</div><div class="ref-title">Which Named Stage Is the Committed Pipeline Threshold?</div><div class="ref-ans-field-wrap"><textarea class="ref-ans-field" rows="1">Proposal Sent</textarea></div></div><div class="ref-item-block unanswered"><div class="ref-num">R12.2a — deferred</div><div class="ref-title">What Is the Custom Commit Flag Field Name on crm.lead?</div><div class="ref-ans-field-wrap"><textarea class="ref-ans-field" rows="1">the odoo technical architect can confirm this - i don't know.</textarea></div></div><div class="ref-item-block answered"><div class="ref-num">R12.2b</div><div class="ref-title">What Value on the Custom Commit Flag Field Means "Committed"?</div><div class="ref-ans-field-wrap"><textarea class="ref-ans-field" rows="1">Selection value "in forecast"</textarea></div></div></div></div></div>
      <div class="q-card answered" id="qc13"><div class="q-card-head" onclick="toggleCard('qc13')"><span class="q-num">Q13</span><span class="q-title">Stalled and Reverting Deals</span><span class="q-chevron">▶</span></div><div class="q-collapsed-ans"><span class="q-ans-preview">A — No system rule; handled through manual review.</span></div><div class="q-body"><div class="answer-field-wrap"><div class="answer-field-label">Answer</div><textarea class="answer-field" rows="1">A</textarea></div></div></div>
      <div class="q-card answered" id="qc14"><div class="q-card-head" onclick="toggleCard('qc14')"><span class="q-num">Q14</span><span class="q-title">Closed-Lost and No-Decision Handling</span><span class="q-chevron">▶</span></div><div class="q-collapsed-ans"><span class="q-ans-preview">A — Immediate removal; deals can be reopened and re-enter.</span></div><div class="q-body"><div class="answer-field-wrap"><div class="answer-field-label">Answer</div><textarea class="answer-field" rows="1">A</textarea></div></div></div>

      <!-- ══ SECTIONS 4–6 (unanswered) ═════════════════════════ -->
      <div class="sec-band">
        <span class="sec-title">§4 · Metrics and Calculations</span>
        <span class="sec-chip blocked">0 / 4 — blocked</span>
      </div>
      <div class="sec-desc">These questions define how key pipeline metrics are computed.</div>

      <div class="q-card unanswered" id="qc15"><div class="q-card-head" onclick="toggleCard('qc15')"><span class="q-num">Q15</span><span class="q-title">Pipeline Coverage Ratio Denominator</span><span class="q-chevron">▶</span></div><div class="q-collapsed-ans"><span class="q-ans-empty">Not yet answered</span></div><div class="q-body"><div class="q-text">When calculating pipeline coverage ratio, what is the denominator?</div><div class="opt-list"><div class="opt-item"><span class="opt-key">A.</span>Remaining quota for the current period (quota minus closed-won to date).</div><div class="opt-item"><span class="opt-key">B.</span>Full period quota (not reduced by closed deals).</div><div class="opt-item"><span class="opt-key">C.</span>Forecast target for the period, which may differ from quota and vary by service type.</div></div><div class="answer-field-wrap"><div class="answer-field-label">Answer</div><textarea class="answer-field" rows="2" placeholder="Type your answer here..."></textarea></div></div></div>

      <div class="q-card unanswered" id="qc16"><div class="q-card-head" onclick="toggleCard('qc16')"><span class="q-num">Q16</span><span class="q-title">Weighted Pipeline Probability Weights</span><span class="q-chevron">▶</span></div><div class="q-collapsed-ans"><span class="q-ans-empty">Not yet answered</span></div><div class="q-body"><div class="answer-field-wrap"><div class="answer-field-label">Answer</div><textarea class="answer-field" rows="2" placeholder="Type your answer here..."></textarea></div></div></div>
      <div class="q-card unanswered" id="qc17"><div class="q-card-head" onclick="toggleCard('qc17')"><span class="q-num">Q17</span><span class="q-title">Win Rate Definition and Exclusions</span><span class="q-chevron">▶</span></div><div class="q-collapsed-ans"><span class="q-ans-empty">Not yet answered</span></div><div class="q-body"><div class="answer-field-wrap"><div class="answer-field-label">Answer</div><textarea class="answer-field" rows="2" placeholder="Type your answer here..."></textarea></div></div></div>
      <div class="q-card unanswered" id="qc18"><div class="q-card-head" onclick="toggleCard('qc18')"><span class="q-num">Q18</span><span class="q-title">Sales Velocity and Deal Value Metric</span><span class="q-chevron">▶</span></div><div class="q-collapsed-ans"><span class="q-ans-empty">Not yet answered</span></div><div class="q-body"><div class="answer-field-wrap"><div class="answer-field-label">Answer</div><textarea class="answer-field" rows="2" placeholder="Type your answer here..."></textarea></div></div></div>

      <!-- ══ NEEDS CLARIFICATION ════════════════════════════════ -->
      <div class="needs-clar-band">
        <span class="needs-clar-title">⚠ Needs Clarification</span>
      </div>
      <div class="clar-card">
        <div class="clar-card-title">Committed Pipeline — Potential for Contradictory Answers</div>
        <div class="clar-card-body"><em>Q2</em> and <em>Q3</em> are tightly linked. If Q2 = "forecast flag only" but Q3 = "stage auto-sets the flag," then the flag is effectively stage-driven. No action needed now, but flagging the dependency.</div>
      </div>
      <div class="clar-card blocked">
        <div class="clar-card-title">Unanswered Questions — Skill Generation Blocked</div>
        <div class="clar-card-body">Sections 4–6 (Metrics, Segmentation, Modeling — Q15–Q23) are entirely unanswered. These must be completed before skill generation can proceed.</div>
      </div>

      <div style="height:24px"></div>
    </div>

    <div class="bottom-bar">
      <div class="bottom-hint">Answers save automatically as you type.</div>
      <div class="btn-row">
        <button class="btn btn-outline">↺ Reload</button>
        <button class="btn btn-primary" disabled style="opacity:0.45">Continue → <span style="font-size:10px">(12 unanswered)</span></button>
      </div>
    </div>
  </div>
</div>

<script>
function toggleCard(id) {
  document.getElementById(id).classList.toggle('expanded');
}
// Auto-resize textareas
document.querySelectorAll('textarea').forEach(ta => {
  ta.addEventListener('input', () => {
    ta.style.height = 'auto';
    ta.style.height = ta.scrollHeight + 'px';
  });
});
</script>
</body>
</html>
